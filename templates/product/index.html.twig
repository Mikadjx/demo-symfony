{% extends 'base.html.twig' %}

{% block title %}{{ product.name }} - La Petite Maison de l'Ã‰pouvante{% endblock %}

{% block body %}

<!-- NAVBAR -->
<nav class="navbar">
  <a href="{{ path('app_home') }}" class="navbar-brand">
    <span class="skull">ðŸ’€</span> La Petite Maison de l'Ã‰pouvante
  </a>
  <ul class="navbar-links">
    <li><a href="{{ path('app_home') }}">Accueil</a></li>
    <li><a href="{{ path('app_home') }}">Catalogue</a></li>
  </ul>
</nav>

<!-- PRODUCT DETAIL -->
<section class="product-detail">
  <div class="product-container">

    <div class="product-breadcrumb">
      <a href="{{ path('app_home') }}">Accueil</a>
      <span>â€º</span>
      <span>{{ product.category }}</span>
      <span>â€º</span>
      <span>{{ product.name }}</span>
    </div>

    <div class="product-main">
      <div class="product-image">
        <div class="product-image-placeholder">
          {% if product.category == 'figurines' %}ðŸ§Ÿ
          {% elseif product.category == 'blu-ray' %}ðŸ“€
          {% elseif product.category == 'fanzine' %}ðŸ“–
          {% elseif product.category == 'jeux' %}ðŸŽ²
          {% else %}ðŸ’€{% endif %}
        </div>
      </div>

      <div class="product-info">
        <div class="product-category-tag">{{ product.category }}</div>
        <h1 class="product-name">{{ product.name }}</h1>
        <p class="product-description">{{ product.description }}</p>

        <div class="product-price-block">
          <span class="product-price">{{ product.price }} â‚¬</span>
          <span class="
            {% if product.stock > 10 %}stock-ok
            {% elseif product.stock > 0 %}stock-low
            {% else %}stock-empty{% endif %}">
            {% if product.stock > 0 %}
              âœ“ En stock ({{ product.stock }} disponibles)
            {% else %}
              âœ— Rupture de stock
            {% endif %}
          </span>
        </div>

        {% if product.stock > 0 %}
          <button class="btn-add-cart">Ajouter au panier</button>
        {% else %}
          <button class="btn-add-cart disabled" disabled>Indisponible</button>
        {% endif %}
      </div>
    </div>
  </div>
</section>

<!-- RECOMMENDATIONS -->
{% if recommendations is not empty %}
<section class="recommendations">
  <div class="products-section">
    <h2>Vous aimerez aussi</h2>
    <div class="products-grid">
      {% for item in recommendations %}
      <a href="{{ path('app_product', {id: item.id}) }}" class="card-link">
        <div class="card">
          <div class="card-category">{{ item.category }}</div>
          <h3 class="card-title">{{ item.name }}</h3>
          <p class="card-desc">{{ item.description }}</p>
          <div class="card-footer">
            <span class="card-price">{{ item.price }} â‚¬</span>
            <span class="
              {% if item.stock > 10 %}stock-ok
              {% elseif item.stock > 0 %}stock-low
              {% else %}stock-empty{% endif %}">
              {% if item.stock > 0 %}En stock{% else %}Rupture{% endif %}
            </span>
          </div>
        </div>
      </a>
      {% endfor %}
    </div>
  </div>
</section>
{% endif %}

<!-- FOOTER -->
<footer class="footer">
  <div class="footer-content">
    <p>ðŸ’€ La Petite Maison de l'Ã‰pouvante Â© 2025</p>
    <p>AngoulÃªme â€¢ Aix-en-Provence â€¢ Lyon â€¢ Londres</p>
  </div>
</footer>

{% endblock %}