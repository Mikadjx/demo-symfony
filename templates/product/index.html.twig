{% extends 'base.html.twig' %}

{% block title %}Gestion des Produits{% endblock %}

{% block body %}

<nav class="navbar">
  <a href="{{ path('app_home') }}" class="navbar-brand">
    <span class="skull">ðŸ’€</span> La Petite Maison de l'Ã‰pouvante
  </a>
  <ul class="navbar-links">
    <li><a href="{{ path('app_home') }}">Accueil</a></li>
    {# <li><a href="{{ path('product_index') }}">Admin</a></li> #}
  </ul>
</nav>

<section class="crud-section">
  <div class="crud-header">
    <h1>ðŸ—‚ Gestion des Produits</h1>
    <a href="{{ path('app_product_new') }}" class="btn btn-primary">+ Nouveau produit</a>
  </div>

  <table class="crud-table">
    <thead>
      <tr>
        <th>ID</th>
        <th>Nom</th>
        <th>CatÃ©gorie</th>
        <th>Prix</th>
        <th>Stock</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for product in products %}
      <tr>
        <td>{{ product.id }}</td>
        <td>{{ product.name }}</td>
        <td>{{ product.category }}</td>
        <td>{{ product.price }} â‚¬</td>
        <td>
          <span class="
            {% if product.stock > 10 %}stock-ok
            {% elseif product.stock > 0 %}stock-low
            {% else %}stock-empty{% endif %}">
            {{ product.stock }}
          </span>
        </td>
        <td style="display:flex; gap:0.5rem;">
          <a href="{{ path('app_product_show', {'id': product.id}) }}" class="btn btn-secondary">Voir</a>
          <a href="{{ path('app_product_edit', {'id': product.id}) }}" class="btn btn-warning">Ã‰diter</a>
          {{ include('product/_delete_form.html.twig') }}
        </td>
      </tr>
      {% else %}
      <tr>
        <td colspan="6" style="text-align:center; color:#666;">Aucun produit trouvÃ©</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</section>

<footer class="footer">
  <p>ðŸ’€ La Petite Maison de l'Ã‰pouvante Â© 2025</p>
</footer>

{% endblock %}